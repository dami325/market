# Redis 기본 설정 파일

################################## NETWORK ####################################

# Redis가 바인드(bind)할 IP 주소 (기본값: localhost)
# 외부에서 접근 가능하도록 설정하려면 0.0.0.0으로 변경
bind 0.0.0.0

# Redis가 수신할 포트 (기본값: 6379)
port 6379

# 비밀번호 설정 (선택)
requirepass market9819!@

################################# SECURITY ###################################

# 보호 모드 (기본적으로 활성화됨, 외부 네트워크 연결을 차단)
protected-mode yes

################################# PERSISTENCE ################################

# RDB (데이터베이스 덤프) 설정
# 15분 동안 1개 이상의 키 변경 시 덤프
save 900 1
# 5분 동안 10개 이상의 키 변경 시 덤프
save 300 10
# 1분 동안 10,000개 이상의 키 변경 시 덤프
save 60 10000

# RDB 파일을 저장할 디렉토리
dir /data

# RDB 파일 이름
dbfilename dump.rdb

# AOF(Append-Only File) 설정
appendonly yes
appendfilename "appendonly.aof"

################################# MEMORY #####################################

# Redis가 사용할 최대 메모리 설정 (예: 512MB)
# 기본적으로 제한 없음. 필요 시 아래 값을 설정.
maxmemory 2gb

# 메모리가 가득 찼을 때 처리 정책 설정 (volatile-ttl)
# 가능한 옵션:
# 1. noeviction
#    - 메모리가 가득 찼을 때 추가 데이터를 허용하지 않습니다.
#    - 쓰기 명령(SET, HSET 등)이 실패하며, 클라이언트에게 오류를 반환합니다.
#    - 기본 설정 (기본 정책).
#
# 2. allkeys-lru
#    - 전체 키에서 가장 최근에 사용되지 않은 키(Least Recently Used)를 제거하여 공간 확보.
#    - 캐시 시스템에 적합.
#
# 3. volatile-lru
#    - 만료 설정(TTL)이 있는 키에서 가장 최근에 사용되지 않은 키를 제거.
#    - TTL이 없는 키는 제거되지 않음.
#
# 4. allkeys-random
#    - 전체 키에서 임의로 키를 제거하여 공간 확보.
#    - 일관성이 중요하지 않은 경우 적합.
#
# 5. volatile-random
#    - 만료 설정(TTL)이 있는 키에서 임의로 키를 제거.
#    - TTL이 없는 키는 제거되지 않음.
#
# 6. volatile-ttl
#    - 만료 설정(TTL)이 있는 키에서 남은 TTL이 가장 짧은 키를 제거.
#    - TTL이 없는 키는 제거되지 않음.
#
# 정책 설정 예제:
maxmemory-policy volatile-ttl

################################## LOGGING ###################################

# 로그 파일 경로 (stdout: 표준 출력)
logfile ""

# 로그 레벨 (debug, verbose, notice, warning)
loglevel notice

################################ CLIENTS #####################################

# 최대 클라이언트 연결 수 (기본값: 10000)
# maxclients 10000

############################### ADVANCED #####################################

# 스냅샷 저장 실패 시 종료 여부
stop-writes-on-bgsave-error yes

# 데이터베이스 숫자 (기본값: 16)
databases 16

################################### MISC #####################################

# Redis 서버 이름
# server-name redis

# Redis가 활성화될 동안 액세스한 키를 로깅
# notify-keyspace-events ""
